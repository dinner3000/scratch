<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->

  <!-- Bootstrap CSS -->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker3.min.css">

  <style>
    .container {
      padding-top: 50px;
    }

    .command-bar {
      margin-top: 30px;
      overflow: hidden;
    }

    .tabs-bar {
      margin-top: 30px;
    }
  </style>
  <title>互金协会数据报送控制面板</title>
</head>

<body>
  <div class="container">
    <h1>互金协会数据报送控制面板</h1>

    <div class="command-bar">
      <form class="navbar-form navbar-left">

        <div class="input-group date" id="datepicker">
          <input type="text" class="form-control" name="inputdate" id="inputdate" />
          <span class="input-group-addon">
            <i class="glyphicon glyphicon-th"></i>
          </span>
        </div>

        <button class="btn btn-default" data-toggle="button" aria-pressed="false" id="btn-review">查看</button>
        <button class="btn btn-primary" data-toggle="button" aria-pressed="false" id="btn-upload">执行上传</button>
        <button class="btn btn-danger" data-toggle="button" aria-pressed="false" id="btn-generate">重新生成</button>

        <input type="hidden" name="user-action" id="user-action" />
        <input type="hidden" name="user-confirm" id="user-confirm" />
      </form>
    </div>
    <div class="tabs-bar">
      <ul class="nav nav-tabs">
        <li role="presentation" class="active">
          <a href="#proj" aria-controls="proj" role="tab" data-toggle="tab">项目信息</a>
        </li>
        <li role="presentation">
          <a href="#bor" aria-controls="bor" role="tab" data-toggle="tab">借款人信息</a>
        </li>
        <li role="presentation">
          <a href="#inv" aria-controls="inv" role="tab" data-toggle="tab">出借人信息</a>
        </li>
      </ul>
    </div>
    <div id="myTabContent" class="tab-content">
      <div role="tabpanel" class="tab-pane fade in active" id="proj">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">项目</th>
              <th scope="col">First</th>
              <th scope="col">Last</th>
              <th scope="col">Handle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div role="tabpanel" class="tab-pane fade" id="bor">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">借款人</th>
              <th scope="col">First</th>
              <th scope="col">Last</th>
              <th scope="col">Handle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div role="tabpanel" class="tab-pane fade" id="inv">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">出借人</th>
              <th scope="col">First</th>
              <th scope="col">Last</th>
              <th scope="col">Handle</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="modal-notice">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
              <span class="sr-only">Close</span>
            </button>
            <h4 class="modal-title">操作提示</h4>
          </div>
          <div class="modal-body">
            <p class="modal-body-text">日期不能为空，请返回重新选择。</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          </div>
        </div>
      </div>
    </div>
    <!-- /.modal -->

    <div class="modal fade" tabindex="-1" role="dialog" id="modal-confirm">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
              <span class="sr-only">Close</span>
            </button>
            <h4 class="modal-title">操作确认</h4>
          </div>
          <div class="modal-body">
            <p class="modal-body-text">您确定要继续进行操作吗？</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="modal-btn-confirm">确定</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </div>
      </div>
    </div>
    <!-- /.modal -->
  </div>

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="http://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/locales/bootstrap-datepicker.zh-CN.min.js"></script>

  <!-- Optional JavaScript -->
  <script lang="JavaScript">
    $(document).ready(function () {
      // Init DatePicker component
      $('#datepicker').datepicker({
        format: "yyyy/mm/dd",
        startDate: "2018/05/10",
        endDate: "-1d",
        daysOfWeekHighlighted: "0,6",
        forceParse: true,
        // defaultViewDate: "2018/05/11",
        // startView: 1,
        // todayBtn: true,
        clearBtn: true,
        language: "zh-CN",
        autoclose: true,
        todayHighlight: true
      });
      // $('#datepicker').on('changeDate', function () {
      //   console.log($('#datepicker').datepicker('getFormattedDate'));
      // });
      $('#datepicker').datepicker("setDate", "-1d");

      // Init button events
      $("#btn-review").click(function () {
        if(!$("#inputdate").val()){
          $("#modal-notice").modal("show");
          return false;
        }

        console.log("review data for date '%s'", $("#inputdate").val());
      });

      $("#btn-upload").click(function () {
        if(!$("#inputdate").val()){
          $("#modal-notice").modal("show");
          return false;
        }

        $("#user-action").val("upload");
        $("#modal-confirm").modal("show");

        console.log("upload data for date '%s'", $("#inputdate").val());
      });

      $("#btn-generate").click(function () {
        if(!$("#inputdate").val()){
          $("#modal-notice").modal("show");
          return false;
        }

        $("#user-action").val("generate");
        $("#modal-confirm").modal("show");

        console.log("regenerate data for date '%s'", $("#inputdate").val());
      });

      //Init modal component
      $('#modal-confirm').on('show.bs.modal', function (event) {
        // var button = $(event.relatedTarget) // Button that triggered the modal
        // var recipient = button.data('whatever') // Extract info from data-* attributes
        var recipient = $("#user-action").val();
        // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
        // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        var modal = $(this)
        console.log(recipient);
        switch (recipient) {
          case "upload":
            modal.find('.modal-title').text("操作确认")
            modal.find('.modal-body .modal-body-text').text("即将进行接口文件上传，点击【确认】继续。");
            break;
          case "generate":
            modal.find('.modal-title').text("操作确认")
            modal.find('.modal-body .modal-body-text').text("即将进行接口数据重新生成，点击【确认】继续。");
            break;
          default:
            break;
        }
        $("#user-action").val("");
        // console.log($("#triggered-by").val())
      })

    })
  </script>

</body>

</html>